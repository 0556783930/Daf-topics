<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>Viewer</title>

<style>
:root {
  --bg-dark: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  --bg-light: #f4f4f4;
  --accent: #ff9800;
}

body {
  margin:0;
  font-family: Arial, sans-serif;
  background: var(--bg-dark);
  display:flex;
  flex-direction:column;
  height:100vh;
  overflow:hidden;
  transition:0.4s;
}

.light-mode {
  background: var(--bg-light);
}

.viewer-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 25px;
  background:rgba(255,255,255,0.1);
  backdrop-filter: blur(12px);
  color:white;
}

.light-mode .viewer-header {
  background:#ffffff;
  color:black;
}

.controls button {
  margin-left:10px;
  background:var(--accent);
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
  transition:0.2s;
}

.controls button:hover {
  transform:scale(1.05);
}

iframe {
  flex:1;
  border:none;
  opacity:0;
  transition:opacity 0.5s ease;
}

iframe.loaded {
  opacity:1;
}

.loader {
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:20px;
  color:white;
  animation:pulse 1s infinite;
}

@keyframes pulse {
  0% {opacity:0.3;}
  50% {opacity:1;}
  100% {opacity:0.3;}
}
</style>
</head>
<body>

<div class="viewer-header">
  <span id="fileName"></span>

  <div class="controls">
    <button onclick="prevFile()">â¬…</button>
    <button onclick="nextFile()">â¡</button>
    <button onclick="toggleTheme()">ğŸŒ“</button>
    <button onclick="goBack()">ğŸ </button>
    <button onclick="goFull()">â›¶</button>
  </div>
</div>

<div class="loader" id="loader">×˜×•×¢×Ÿ ××××¨...</div>
<iframe id="pdfFrame"></iframe>

<script>

const params = new URLSearchParams(window.location.search);
const file = params.get("file");

const frame = document.getElementById("pdfFrame");
const loader = document.getElementById("loader");
const title = document.getElementById("fileName");

let files = JSON.parse(localStorage.getItem("pdfList")) || [];
let currentIndex = files.indexOf(file);

if (file) {
  title.textContent = file.replace(".pdf","");
  frame.src = `assets/pdf/${file}`;
  localStorage.setItem("lastRead", file);
}

frame.onload = () => {
  loader.style.display = "none";
  frame.classList.add("loaded");
};

function goBack() {
  window.location.href = "articles.html";
}

function goFull() {
  if (frame.requestFullscreen) {
    frame.requestFullscreen();
  }
}

function nextFile() {
  if (currentIndex < files.length - 1) {
    window.location.href = `viewer.html?file=${files[currentIndex+1]}`;
  }
}

function prevFile() {
  if (currentIndex > 0) {
    window.location.href = `viewer.html?file=${files[currentIndex-1]}`;
  }
}

function toggleTheme() {
  document.body.classList.toggle("light-mode");
}

</script>

</body>
</html>
